<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Fedora Docs Toolchain Proposal Latest | Proposal | References | Pintail Notes</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <link href="../../../latest/_stylesheets/asciibinder.css" rel="stylesheet" />

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

   <!-- <link href="../../../latest/_images/favicon32x32.png" rel="shortcut icon" type="text/css"> -->
  <!--[if IE]><link rel="shortcut icon" href="../../../latest/_images/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="http://www.winglemeyer.org/"><img alt="winglemeyer.org" src="../../../latest/_images/winglemeyer.org-logo.png"></a>
      </div>
    </div>
  </div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../../index.html">even the horse knew</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../proposal/overview.html">Fedora Docs Toolchain Proposal Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../proposal/overview.html">Proposal</a>
      </li>
      <li class="hidden-xs active"><a href="../../proposal/references/pintail-notes.html">References</a></li>
      <li class="hidden-xs active">
        Pintail Notes
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-down"></span>Proposal
      </a>
      <ul id="topicGroup0" class="collapse in list-unstyled">
            <li><a class="" href="../../proposal/overview.html">Overview</a></li>
            <li><a class="" href="../../proposal/rationale.html">Why these Components?</a></li>
            <li><a class="" href="../../proposal/converting.html">Converting DocBook</a></li>
            <li><a class="" href="../../proposal/asciibinder.html">Converting a Repository</a></li>
            <li><a class="" href="../../proposal/translation.html">Translating AsciiDoc</a></li>
            <li class="nav-header">
              <a class="" href="#" data-toggle="collapse" data-target="#topicSubGroup-0-5">
                <span id="sgSpan-0-5" class="fa fa-caret-right"></span>&nbsp;Proof of Concept (POC)
              </a>
              <ul id="topicSubGroup-0-5" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../proposal/poc/install.html">Pre-Requisites</a></li>
                  <li><a class="" href="../../proposal/poc/single-repo.html">Build one Book or Documentation Collection</a></li>
                  <li><a class="" href="../../proposal/poc/multi-repo.html">Build the Entire Site</a></li>
              </ul>
            </li>
            <li><a class="" href="../../proposal/nextsteps.html">Next Steps</a></li>
            <li class="nav-header">
              <a class="" href="#" data-toggle="collapse" data-target="#topicSubGroup-0-7">
                <span id="sgSpan-0-7" class="fa fa-caret-down"></span>&nbsp;References
              </a>
              <ul id="topicSubGroup-0-7" class="nav-tertiary list-unstyled collapse in">
                  <li><a class=" active" href="../../proposal/references/pintail-notes.html">Pintail Notes</a></li>
                  <li><a class="" href="../../proposal/references/downstream-notes.html">Downstream Integration Notes</a></li>
              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Pintail Notes</h2>
        </div>
        <div class="sect1">
<h2 id="requirements-fit"><a class="anchor" href="#requirements-fit"></a>Requirements Fit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Docs FAD selected
<a href="https://github.com/projectmallard/pintail">pintail</a>. Pintail&#8217;s answer to
the requirements are, as I understand it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Transform markup into HTML</p>
<div class="paragraph">
<p>This is done by converting DocBook and AsciiDoc into an intermediate XML
format (mallard?). This is then converted to HTML.</p>
</div>
</li>
<li>
<p>Assemble a multi-version site</p>
<div class="paragraph">
<p>Multi-version support is done by specifying different branches of repos
to be built at the same time.</p>
</div>
</li>
<li>
<p>Assemble a multi-language site</p>
<div class="paragraph">
<p>Multi-lingual support is currently an unknown.</p>
</div>
</li>
<li>
<p>Support being packaged in Fedora</p>
<div class="paragraph">
<p>Packages are working their way through the review process.</p>
</div>
</li>
<li>
<p>Be able to be automated</p>
<div class="paragraph">
<p>This should be able to be done as there are no required manual steps
that do not have a reasonably scriptable algorithm.</p>
</div>
</li>
<li>
<p>Provide a relatively easy set up experience for writers to test with</p>
<div class="paragraph">
<p>Setup directions need to be improved, however it is able to be run from
both a container and via a direct install.</p>
</div>
</li>
<li>
<p>Interface with Zanata (see above)</p>
<div class="paragraph">
<p>This is an unknown. Presumably the intermediate XML format has easy
<code>.pot/.po</code> processing.</p>
</div>
</li>
<li>
<p>Support Theming</p>
<div class="paragraph">
<p>Pintail requires a combination of CSS and XSLT in order to theme. No one
from the Fedora Design team has signed on to do the theming and it
appears that the existing Fedora CSS theming is not easily reusable.</p>
</div>
</li>
<li>
<p>Able to integrate with a search solution</p>
<div class="paragraph">
<p>Work is being done on integration with elastic-search.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="converting-a-docbook-publican-repo-for-pintail"><a class="anchor" href="#converting-a-docbook-publican-repo-for-pintail"></a>Converting a docbook-publican repo for pintail</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Note: These are out of date.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add index.duck and pintail.cfg single repo versions</p>
</li>
<li>
<p>Rename the entity file to Guide.ent to work with Common_Content. [no longer required]
Don&#8217;t forget to update the xml files that loads it.</p>
<div class="paragraph">
<p><code>sed -i -e s/Installation_Guide.ent/Guide.ent/ *.xml</code></p>
</div>
</li>
<li>
<p>Add the Common_Content subtree</p>
<div class="paragraph">
<p><code>git subtree add --prefix _Common_Content <a href="https://pagure.io/docs-common-content.git" class="bare">https://pagure.io/docs-common-content.git</a> master --squash</code></p>
</div>
</li>
<li>
<p>Optionally, deleted doctype declarations from every file but the main
book file. This speeds up builds 7-10x.  For the Installation guide
time went from 20+ min to 2 min</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sed -i -e 's/PUBLIC "-\/\/OASIS\/\/DTD DocBook XML V4.5\/\/EN" "http:\/\/www.oasis-open.org\/docbook\/xml\/4.5\/docbookx.dtd" //' *.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: Don&#8217;t forget to <code>git checkout</code> the base xml file</p>
</div>
<div class="paragraph">
<p>Note: If you do this, define nbsp as &amp;#160 in the entity file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;!ENTITY nbsp '&amp;#160;'&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add <code><em>pintail</em></code> to the .gitignore</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="html-build-is-broken-with-the-pintail-container"><a class="anchor" href="#html-build-is-broken-with-the-pintail-container"></a>HTML build is broken with the pintail container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>find __pintail__/build -iname *.html | xargs -L1 sed -i -e 's/\/workdir\/__pintail__\/build\///' $@</code></pre>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
   <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <!-- Latest compiled and minified JavaScript -->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
   <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>